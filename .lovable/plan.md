

## План: Виправлення послідовності відображення вподобань та коментарів у публікаціях

---

### Причина проблеми

У компоненті `PostCard.tsx` структура елементів залежить від наявності зображення:

```text
┌─────────────────────────────────────────────────────────────────┐
│                     ПОТОЧНА СТРУКТУРА                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Публікація ІЗ зображенням:     Публікація БЕЗ зображення:      │
│                                                                 │
│  ┌───────────────────┐          ┌───────────────────┐           │
│  │ Заголовок         │          │ Заголовок         │           │
│  ├───────────────────┤          ├───────────────────┤           │
│  │ [Зображення]      │          │ (пропущено)       │           │
│  ├───────────────────┤          ├───────────────────┤           │
│  │ ♡ 💬 🔗  [🔖]     │  ←кнопки │ ♡ 💬 🔗  [🔖]     │  ←кнопки  │
│  │ X вподобань       │          │ X вподобань       │           │
│  │ Текст публікації  │          │ Текст публікації  │           │
│  │                   │          │ ┌─────────────────┐│           │
│  │                   │          │ │ YouTube превʼю  ││  ←великий│
│  │                   │          │ │                 ││   блок   │
│  │                   │          │ └─────────────────┘│           │
│  │ Коментарі, час    │          │ Коментарі, час    │           │
│  └───────────────────┘          └───────────────────┘           │
│                                                                 │
│  ✓ Кнопки ПІД медіа            ✗ Кнопки НАД медіа              │
│    (правильно)                   (неправильно)                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**Причина:** `VideoPreview` рендериться всередині секції `caption` (рядок 171), яка знаходиться **після** кнопок дій. Тобто для публікацій з YouTube - кнопки дій показуються ПЕРЕД відео превʼю.

---

### Рішення

Винести `VideoPreview` на той же рівень, що й зображення - **перед** блоком дій:

```text
┌─────────────────────────────────────────────────────────────────┐
│                     ВИПРАВЛЕНА СТРУКТУРА                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Публікація ІЗ зображенням:     Публікація ІЗ YouTube:          │
│                                                                 │
│  ┌───────────────────┐          ┌───────────────────┐           │
│  │ Заголовок         │          │ Заголовок         │           │
│  ├───────────────────┤          ├───────────────────┤           │
│  │ [Зображення]      │          │ [YouTube превʼю]  │  ←медіа   │
│  ├───────────────────┤          ├───────────────────┤           │
│  │ ♡ 💬 🔗  [🔖]     │  ←кнопки │ ♡ 💬 🔗  [🔖]     │  ←кнопки  │
│  │ X вподобань       │          │ X вподобань       │           │
│  │ Текст публікації  │          │ Текст публікації  │           │
│  │ Коментарі, час    │          │ Коментарі, час    │           │
│  └───────────────────┘          └───────────────────┘           │
│                                                                 │
│  ✓ Кнопки ПІД медіа            ✓ Кнопки ПІД медіа              │
│    (правильно)                   (правильно)                    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

### Файл для редагування

**`src/components/feed/PostCard.tsx`**

#### Зміни:

1. **Перенести VideoPreview вище** - на рівень блоку з зображенням (перед секцією дій)

2. **Видалити VideoPreview** з секції caption (рядок 170-171)

3. **Додати VideoPreview** після блоку зображення (після рядка 103)

#### Код до змін (рядки 93-172):

```tsx
{/* Зображення - показуємо тільки якщо є */}
{imageUrl && (
  <div className="relative aspect-square overflow-hidden bg-muted">
    <img ... />
  </div>
)}

{/* Дії */}
<div className="p-3">
  ...
  {/* Опис */}
  <div className="mt-1">
    <p className="text-sm">
      <Link ...>{author.name}</Link> {caption}
    </p>
    
    {/* Вбудоване відео превʼю */}
    {videoEmbed && <VideoPreview embed={videoEmbed} />}  // ← ПРОБЛЕМА ТУТ
  </div>
  ...
</div>
```

#### Код після змін:

```tsx
{/* Зображення - показуємо тільки якщо є */}
{imageUrl && (
  <div className="relative aspect-square overflow-hidden bg-muted">
    <img ... />
  </div>
)}

{/* Вбудоване відео превʼю - показуємо тільки якщо немає зображення */}
{!imageUrl && videoEmbed && (
  <div className="px-3">
    <VideoPreview embed={videoEmbed} />
  </div>
)}

{/* Дії */}
<div className="p-3">
  ...
  {/* Опис */}
  <div className="mt-1">
    <p className="text-sm">
      <Link ...>{author.name}</Link> {caption}
    </p>
    {/* VideoPreview видалено звідси */}
  </div>
  ...
</div>
```

---

### Додаткове покращення VideoPreview

Оновити `VideoPreview` для кращого вигляду на верхньому рівні:

**`src/components/feed/VideoPreview.tsx`**

Видалити `mt-3` з класів, оскільки відступ буде керуватися батьківським елементом:

```tsx
// Було:
<div className="mt-3 rounded-lg overflow-hidden border bg-muted">

// Стане:
<div className="rounded-lg overflow-hidden border bg-muted">
```

---

### Підсумок змін

| Файл | Зміни |
|------|-------|
| `src/components/feed/PostCard.tsx` | Перенести VideoPreview перед блоком дій |
| `src/components/feed/VideoPreview.tsx` | Видалити mt-3 для кращої інтеграції |

---

### Очікуваний результат

- Кнопки вподобань та коментарів завжди будуть **під** медіа контентом
- Однакова структура для всіх типів публікацій (зображення, відео, YouTube)
- Послідовний користувацький досвід

