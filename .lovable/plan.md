

## ĞŸĞ»Ğ°Ğ½: ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ñ–Ñ Ñ–ĞºĞ¾Ğ½Ğ¾Ğº Ğ¤Ğ¾Ñ‚Ğ¾/Ğ’Ñ–Ğ´ĞµĞ¾/ĞŸĞ¾Ğ´Ñ–Ñ Ñƒ ÑÑ‚Ñ€Ñ–Ñ‡Ñ†Ñ– Ğ½Ğ¾Ğ²Ğ¸Ğ½ (ÑĞº Ñƒ Facebook)

---

### ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ "Ğ¤Ğ¾Ñ‚Ğ¾", "Ğ’Ñ–Ğ´ĞµĞ¾", "ĞŸĞ¾Ğ´Ñ–Ñ" (Ñ€ÑĞ´ĞºĞ¸ 170-181 Ğ² `NewsFeed.tsx`) Ñ” ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¼Ğ¸:
- ĞĞµĞ¼Ğ°Ñ” `onClick` Ğ¾Ğ±Ñ€Ğ¾Ğ±Ğ½Ğ¸ĞºÑ–Ğ²
- ĞĞµĞ¼Ğ°Ñ” ÑÑ‚Ğ°Ğ½Ñƒ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ğ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²
- ĞĞµĞ¼Ğ°Ñ” Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»Ñƒ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¼ĞµĞ´Ñ–Ğ°

---

### Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ: Ğ ĞµĞ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ñ„Ğ¾Ñ€Ğ¼Ğ¸ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ¸Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Facebook

```text
ĞŸĞĞ¢ĞĞ§ĞĞ˜Ğ™ (Ğ²ĞµĞ»Ğ¸ĞºĞ¸Ğ¹ Ğ±Ğ»Ğ¾Ğº):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Ğ©Ğ¾ Ñƒ Ğ²Ğ°Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾?                       â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ“· Ğ¤Ğ¾Ñ‚Ğ¾  ğŸ¬ Ğ’Ñ–Ğ´ĞµĞ¾  ğŸ‘¥ ĞŸĞ¾Ğ´Ñ–Ñ  [ĞĞ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ĞĞĞ’Ğ˜Ğ™ (ÑĞº Ñƒ Facebook):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ [Ğ©Ğ¾ Ñƒ Ğ²Ğ°Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾?___________] ğŸ¬ ğŸ“· ğŸ‘¥  â”‚
â”‚                                            â”‚
â”‚ (ĞŸÑ€Ğ¸ Ğ²Ğ¸Ğ±Ğ¾Ñ€Ñ– Ñ„Ğ°Ğ¹Ğ»Ñƒ - Ğ¿Ñ€ĞµĞ²Ê¼Ñ)                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [ĞŸÑ€ĞµĞ²Ê¼Ñ Ñ„Ğ¾Ñ‚Ğ¾/Ğ²Ñ–Ğ´ĞµĞ¾]               âŒ   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              [ĞĞ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Ğ¤Ğ°Ğ¹Ğ» Ğ´Ğ»Ñ Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ

**`src/components/feed/NewsFeed.tsx`**

---

### Ğ—Ğ¼Ñ–Ğ½Ğ° 1: Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ñ– Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸ Ñ‚Ğ° ÑÑ‚Ğ°Ğ½Ğ¸

```tsx
// Ğ”Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ– Ñ–Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸
import { useRef } from "react";
import { X } from "lucide-react";
import { Avatar, AvatarImage, AvatarFallback } from "@/components/ui/avatar";
import { Input } from "@/components/ui/input";
import { uploadToStorage } from "@/lib/storage";

// ĞĞ¾Ğ²Ñ– ÑÑ‚Ğ°Ğ½Ğ¸
const [selectedFile, setSelectedFile] = useState<File | null>(null);
const [previewUrl, setPreviewUrl] = useState<string | null>(null);
const [isUploading, setIsUploading] = useState(false);
const imageInputRef = useRef<HTMLInputElement>(null);
const videoInputRef = useRef<HTMLInputElement>(null);
```

---

### Ğ—Ğ¼Ñ–Ğ½Ğ° 2: Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ¾Ğ±Ñ€Ğ¾Ğ±Ğ½Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²

```tsx
const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
  const file = e.target.files?.[0];
  if (!file) return;

  // Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ Ñ‚Ğ¸Ğ¿Ñƒ Ñ„Ğ°Ğ¹Ğ»Ñƒ
  if (!file.type.startsWith('image/') && !file.type.startsWith('video/')) {
    toast({ title: 'ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑÑ‚ÑŒÑÑ Ğ»Ğ¸ÑˆĞµ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ñ‚Ğ° Ğ²Ñ–Ğ´ĞµĞ¾', variant: 'destructive' });
    return;
  }

  // Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ€Ñƒ (Ğ¼Ğ°ĞºÑ 50MB)
  const maxSize = 50 * 1024 * 1024;
  if (file.size > maxSize) {
    toast({ title: 'Ğ Ğ¾Ğ·Ğ¼Ñ–Ñ€ Ñ„Ğ°Ğ¹Ğ»Ñƒ Ğ½Ğµ Ğ¿Ğ¾Ğ²Ğ¸Ğ½ĞµĞ½ Ğ¿ĞµÑ€ĞµĞ²Ğ¸Ñ‰ÑƒĞ²Ğ°Ñ‚Ğ¸ 50MB', variant: 'destructive' });
    return;
  }

  setSelectedFile(file);
  
  // Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¿Ñ€ĞµĞ²Ê¼Ñ
  const reader = new FileReader();
  reader.onload = (event) => {
    setPreviewUrl(event.target?.result as string);
  };
  reader.readAsDataURL(file);
};

const removeFile = () => {
  setSelectedFile(null);
  setPreviewUrl(null);
  if (imageInputRef.current) imageInputRef.current.value = '';
  if (videoInputRef.current) videoInputRef.current.value = '';
};

const handleEventClick = () => {
  toast({ title: "Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ 'ĞŸĞ¾Ğ´Ñ–Ñ' Ğ² Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±Ñ†Ñ–" });
};
```

---

### Ğ—Ğ¼Ñ–Ğ½Ğ° 3: ĞĞ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸ handleCreatePost Ğ´Ğ»Ñ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¼ĞµĞ´Ñ–Ğ°

```tsx
const handleCreatePost = async () => {
  if (!newPostContent.trim() && !selectedFile) return;

  setIsUploading(true);

  try {
    const currentUser = JSON.parse(localStorage.getItem("currentUser") || "{}");
    
    let mediaUrl = null;

    // Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¼ĞµĞ´Ñ–Ğ° Ñ„Ğ°Ğ¹Ğ»Ñƒ
    if (selectedFile) {
      const fileExtension = selectedFile.name.split('.').pop() || 'jpg';
      const uniqueFileName = `post-${Date.now()}-${Math.random().toString(36).substring(2)}.${fileExtension}`;
      const filePath = `posts/${uniqueFileName}`;
      
      mediaUrl = await uploadToStorage('posts', filePath, selectedFile, selectedFile.type);
    }
    
    const newPost = {
      content: newPostContent,
      user_id: currentUser.id,
      media_url: mediaUrl,
      category: activeCategory === 'all' ? null : activeCategory
    };

    const { data, error } = await supabase
      .from('posts')
      .insert([newPost])
      .select()
      .single();

    if (error) throw error;

    setPosts([data, ...posts]);
    setNewPostContent("");
    setSelectedFile(null);
    setPreviewUrl(null);
    toast({ title: "ĞŸÑƒĞ±Ğ»Ñ–ĞºĞ°Ñ†Ñ–Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾!" });

  } catch (error) {
    console.error("ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°:", error);
    toast({ title: "ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºĞ°Ñ†Ñ–Ñ—", variant: "destructive" });
  } finally {
    setIsUploading(false);
  }
};
```

---

### Ğ—Ğ¼Ñ–Ğ½Ğ° 4: ĞĞ¾Ğ²Ğ¸Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ñ„Ğ¾Ñ€Ğ¼Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºĞ°Ñ†Ñ–Ñ—

```tsx
<Card>
  <CardContent className="p-3 md:p-4">
    {/* ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ²Ğ°Ğ½Ñ– input Ğ´Ğ»Ñ Ğ²Ğ¸Ğ±Ğ¾Ñ€Ñƒ Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ² */}
    <input
      ref={imageInputRef}
      type="file"
      accept="image/*"
      onChange={handleFileSelect}
      className="hidden"
    />
    <input
      ref={videoInputRef}
      type="file"
      accept="video/*"
      onChange={handleFileSelect}
      className="hidden"
    />

    {/* ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ¸Ğ¹ Ñ€ÑĞ´Ğ¾Ğº: Ğ°Ğ²Ğ°Ñ‚Ğ°Ñ€ + Ğ¿Ğ¾Ğ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ñƒ + Ñ–ĞºĞ¾Ğ½ĞºĞ¸ */}
    <div className="flex items-center gap-2 md:gap-3">
      <Avatar className="h-9 w-9 md:h-10 md:w-10 shrink-0">
        <AvatarImage src={currentUser?.avatar_url} />
        <AvatarFallback>{currentUser?.full_name?.[0] || 'U'}</AvatarFallback>
      </Avatar>
      
      <Input
        placeholder="Ğ©Ğ¾ Ñƒ Ğ²Ğ°Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾?"
        value={newPostContent}
        onChange={(e) => setNewPostContent(e.target.value)}
        className="flex-1 h-10 bg-muted/50 border-0"
      />
      
      {/* ĞšĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ñ– Ñ–ĞºĞ¾Ğ½ĞºĞ¸ ÑĞº Ñƒ Facebook */}
      <Button 
        variant="ghost" 
        size="icon"
        onClick={() => videoInputRef.current?.click()}
        className="shrink-0"
      >
        <Video className="h-5 w-5 text-red-500" />
      </Button>
      <Button 
        variant="ghost" 
        size="icon"
        onClick={() => imageInputRef.current?.click()}
        className="shrink-0"
      >
        <Image className="h-5 w-5 text-green-500" />
      </Button>
      <Button 
        variant="ghost" 
        size="icon"
        onClick={handleEventClick}
        className="shrink-0"
      >
        <Users className="h-5 w-5 text-blue-500" />
      </Button>
    </div>

    {/* ĞŸÑ€ĞµĞ²Ê¼Ñ Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñƒ */}
    {previewUrl && selectedFile && (
      <div className="mt-3 relative rounded-lg overflow-hidden border">
        {selectedFile.type.startsWith('image/') ? (
          <img 
            src={previewUrl} 
            alt="Preview" 
            className="w-full max-h-64 object-cover"
          />
        ) : (
          <video 
            src={previewUrl} 
            className="w-full max-h-64 object-cover"
            controls
          />
        )}
        <Button
          variant="destructive"
          size="icon"
          onClick={removeFile}
          className="absolute top-2 right-2 h-8 w-8"
        >
          <X className="h-4 w-4" />
        </Button>
      </div>
    )}

    {/* ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¿ÑƒĞ±Ğ»Ñ–ĞºĞ°Ñ†Ñ–Ñ— - Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ”Ğ¼Ğ¾ ÑĞºÑ‰Ğ¾ Ñ” ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ°Ğ±Ğ¾ Ñ„Ğ°Ğ¹Ğ» */}
    {(newPostContent.trim() || selectedFile) && (
      <div className="mt-3 flex justify-end">
        <Button 
          onClick={handleCreatePost}
          disabled={isUploading}
          className="bg-primary hover:bg-primary/90"
          size="sm"
        >
          <Send className="h-4 w-4 mr-2" />
          {isUploading ? "Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ..." : "ĞĞ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸"}
        </Button>
      </div>
    )}
  </CardContent>
</Card>
```

---

### ĞšĞ¾Ğ»Ñ–Ñ€Ğ½Ğ° ÑÑ…ĞµĞ¼Ğ° Ñ–ĞºĞ¾Ğ½Ğ¾Ğº (ÑĞº Ñƒ Facebook)

| Ğ†ĞºĞ¾Ğ½ĞºĞ° | ĞšĞ¾Ğ»Ñ–Ñ€ | Ğ”Ñ–Ñ |
|--------|-------|-----|
| ğŸ¬ Ğ’Ñ–Ğ´ĞµĞ¾ | `text-red-500` | Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°Ñ” Ğ²Ğ¸Ğ±Ñ–Ñ€ Ğ²Ñ–Ğ´ĞµĞ¾ |
| ğŸ“· Ğ¤Ğ¾Ñ‚Ğ¾ | `text-green-500` | Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°Ñ” Ğ²Ğ¸Ğ±Ñ–Ñ€ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ |
| ğŸ‘¥ ĞŸĞ¾Ğ´Ñ–Ñ | `text-blue-500` | Toast "Ğ’ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±Ñ†Ñ–" |

---

### ĞÑ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

- ĞšĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ğ¸Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ñ„Ğ¾Ñ€Ğ¼Ğ¸ Ğ² Ğ¾Ğ´Ğ¸Ğ½ Ñ€ÑĞ´Ğ¾Ğº (ÑĞº Facebook)
- Ğ†ĞºĞ¾Ğ½ĞºĞ¸ Ğ¤Ğ¾Ñ‚Ğ¾ Ñ‚Ğ° Ğ’Ñ–Ğ´ĞµĞ¾ Ğ¿Ñ€Ğ°Ñ†ÑÑÑ‚ÑŒ - Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ Ğ²Ğ¸Ğ±Ñ–Ñ€ Ñ„Ğ°Ğ¹Ğ»Ñƒ
- ĞŸÑ€ĞµĞ²Ê¼Ñ Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ñƒ Ğ²Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ¿ĞµÑ€ĞµĞ´ Ğ¿ÑƒĞ±Ğ»Ñ–ĞºĞ°Ñ†Ñ–Ñ”Ñ
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸Ğ±Ñ€Ğ°Ğ½Ğ¸Ğ¹ Ñ„Ğ°Ğ¹Ğ»
- ĞœĞµĞ´Ñ–Ğ° Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ÑƒÑ”Ñ‚ÑŒÑÑ Ğ² Supabase Storage
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ¿ÑƒĞ±Ğ»Ñ–ĞºÑƒĞ²Ğ°Ñ‚Ğ¸" Ğ·Ê¼ÑĞ²Ğ»ÑÑ”Ñ‚ÑŒÑÑ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ ĞºĞ¾Ğ»Ğ¸ Ñ” ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚

